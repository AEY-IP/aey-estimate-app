# üóÑÔ∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±—ç–∫–∞–ø–∞–º –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø —á–µ—Ä–µ–∑ npm
```bash
npm run backup
```

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞
```bash
node scripts/backup-database.js
```

### –ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –±—ç–∫–∞–ø
- ‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∏—Ö –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –í—Å–µ —Å–º–µ—Ç—ã —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π (–∫–æ–º–Ω–∞—Ç—ã, —Ä–∞–±–æ—Ç—ã, –º–∞—Ç–µ—Ä–∏–∞–ª—ã)
- ‚úÖ –í—Å–µ –∞–∫—Ç—ã —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- ‚úÖ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (—Ä–∞–±–æ—Ç—ã, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç—ã, —Ñ–æ—Ç–æ, —á–µ–∫–∏
- ‚úÖ –ù–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞
```bash
node scripts/restore-from-backup.js
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞
```bash
node scripts/restore-from-backup.js /path/to/backup.json
```

### ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï
**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç —Ç–µ–∫—É—â—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö!**

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ç–∫–∞–ø–æ–≤

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
```
backups/
‚îú‚îÄ‚îÄ backup_2025-06-23_19-53-37-384Z.json          # –û–±—ã—á–Ω—ã–π –±—ç–∫–∞–ø
‚îú‚îÄ‚îÄ backup_2025-06-23_19-53-37-384Z_compressed.json # –°–∂–∞—Ç—ã–π –±—ç–∫–∞–ø
‚îî‚îÄ‚îÄ ...
```

### –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –±—ç–∫–∞–ø–∞
```json
{
  "metadata": {
    "timestamp": "2025-06-23_19-53-37-384Z",
    "version": "1.0",
    "description": "–ü–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö AEY Estimates",
    "createdAt": "2025-06-23T19:53:37.384Z",
    "tables": {
      "users": 2,
      "clients": 5,
      "estimates": 9,
      "estimateRooms": 7,
      "coefficients": 3
    }
  },
  "data": {
    "users": [...],
    "clients": [...],
    "estimates": [...],
    // ... –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
  }
}
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã (–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 20 —Ñ–∞–π–ª–æ–≤)
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –æ–±—ã—á–Ω—É—é –∏ —Å–∂–∞—Ç—É—é –≤–µ—Ä—Å–∏–∏
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–∞–∑–º–µ—Ä–æ–≤

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ß–∞—Å—Ç–æ—Ç–∞ –±—ç–∫–∞–ø–æ–≤
- üìÖ **–ï–∂–µ–¥–Ω–µ–≤–Ω–æ** - –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- üìÖ **–ü–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏** - –º–∏–≥—Ä–∞—Ü–∏–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- üìÖ **–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

### –•—Ä–∞–Ω–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤
- üíæ **–õ–æ–∫–∞–ª—å–Ω–æ**: –≤ –ø–∞–ø–∫–µ `backups/`
- ‚òÅÔ∏è **–û–±–ª–∞–∫–æ**: –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ Google Drive, Dropbox –∏ —Ç.–¥.
- üóÑÔ∏è **–°–µ—Ä–≤–µ—Ä**: –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
# 1. –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
npm run backup

# 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–æ–ø–∏–∏
cp backups/latest.json backups/test.json
node scripts/restore-from-backup.js backups/test.json

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
```

## PostgreSQL –±—ç–∫–∞–ø—ã (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±)

### –°–æ–∑–¥–∞–Ω–∏–µ SQL –¥–∞–º–ø–∞
```bash
# –ü–æ–ª–Ω—ã–π –¥–∞–º–ø
pg_dump $DATABASE_URL > backup.sql

# –¢–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ
pg_dump --data-only $DATABASE_URL > data_backup.sql

# –¢–æ–ª—å–∫–æ —Å—Ö–µ–º–∞
pg_dump --schema-only $DATABASE_URL > schema_backup.sql
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ SQL –¥–∞–º–ø–∞
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –¥–∞–º–ø–∞
psql $DATABASE_URL < backup.sql

# –¢–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ
psql $DATABASE_URL < data_backup.sql
```

## –°–∫—Ä–∏–ø—Ç—ã –≤ package.json

```json
{
  "scripts": {
    "backup": "node scripts/backup-database.js",
    "restore": "node scripts/restore-data.js",
    "restore-backup": "node scripts/restore-from-backup.js"
  }
}
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±—ç–∫–∞–ø–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞
```bash
ls -la backups/ | head -5
```

### –†–∞–∑–º–µ—Ä –±—ç–∫–∞–ø–æ–≤
```bash
du -h backups/
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –±—ç–∫–∞–ø–∞
```bash
node -e "
const backup = require('./backups/latest.json');
console.log('‚úÖ –ë—ç–∫–∞–ø –≤–∞–ª–∏–¥–Ω—ã–π');
console.log('üìä –¢–∞–±–ª–∏—Ü:', Object.keys(backup.data).length);
console.log('üìÖ –î–∞—Ç–∞:', backup.metadata.createdAt);
"
```

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### Cron –∑–∞–¥–∞—á–∞ (Linux/Mac)
```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø –≤ 2:00
0 2 * * * cd /path/to/project && npm run backup
```

### GitHub Actions
```yaml
name: Daily Backup
on:
  schedule:
    - cron: '0 2 * * *'
jobs:
  backup:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: npm install
      - run: npm run backup
      - uses: actions/upload-artifact@v2
        with:
          name: database-backup
          path: backups/
```

## –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö

### –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –±—ç–∫–∞–ø
npm run restore-backup
# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npm run dev
```

### –ß–∞—Å—Ç–∏—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
–î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –º–æ–∂–Ω–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `restore-from-backup.js` –∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ —á–∞—Å—Ç–∏.

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### "–§–∞–π–ª –±—ç–∫–∞–ø–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–∞–ø–∫–∞ `backups/` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

### "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª –Ω–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —ç—Ç–æ —Ñ–∞–π–ª –∏–∑ –Ω–∞—à–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –±—ç–∫–∞–ø–∞

### "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω

### –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä –±—ç–∫–∞–ø–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∂–∞—Ç—ã–µ –≤–µ—Ä—Å–∏–∏ (`*_compressed.json`)
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞—Ä—Ö–∏–≤–∞—Ü–∏—é —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤
- –ò—Å–∫–ª—é—á–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏–∑ –±—ç–∫–∞–ø–∞ 